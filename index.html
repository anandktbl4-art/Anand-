<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visitor Intelligence Report</title>

<style>
    body{
        background: #000;
        color: #00ff00;
        font-family: Consolas, monospace;
        margin:0;
        padding:20px;
        text-align:center;
    }

    .box{
        display:none;
        background: rgba(0,0,0,0.85);
        padding:20px;
        border:2px solid #00ff00;
        border-radius:10px;
        max-width:450px;
        margin:auto;
        box-shadow:0 0 15px #00ff00;
    }

    h2{ font-size:24px; }
    p{ font-size:17px; }

    .toggle-btn{
        margin-top:10px;
        padding:6px 14px;
        border:none;
        background:#00ff00;
        color:black;
        font-weight:bold;
        border-radius:6px;
        cursor:pointer;
    }

    iframe{
        width:100%;
        height:260px;
        border:2px solid #00ff00;
        margin-top:12px;
    }

    .loader{
        font-size:22px;
        margin-top:40px;
        animation: blink 1s infinite;
    }

    @keyframes blink{
        50%{opacity:0;}
    }
</style>
</head>

<body>

<button class="toggle-btn" onclick="setLang('en')">English</button>
<button class="toggle-btn" onclick="setLang('kn')">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>

<div class="loader">üîç Scanning Visitor... Please wait‚Ä¶</div>

<div class="box">
    <h2 id="title">Visitor Intelligence Report</h2>

    <p id="browser"></p>
    <p id="device"></p>
    <p id="ip"></p>
    <p id="location"></p>

    <p id="visits"></p>

    <h2 id="mapTitle">üó∫ Visitor Map</h2>
    <iframe id="map"></iframe>
</div>

<script>
let lang = "en";  // default English

function setLang(l){
    lang = l;
    translateUI();
}

function translateUI(){
    if(lang === "kn"){
        document.getElementById("title").innerText = "üîç ‡≤≠‡≥á‡≤ü‡≤ø ‡≤®‡≥Ä‡≤°‡≤ø‡≤¶‡≤µ‡≤∞ ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤µ‡≤∞‡≤¶‡≤ø";
        document.getElementById("mapTitle").innerText = "üó∫ ‡≤≠‡≥á‡≤ü‡≤ø ‡≤®‡≥ã‡≤°‡≥Å‡≤µ ‡§®‡§ï‡≤∂‡≥Ü";
        document.getElementById("visits").innerText = "‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤≠‡≥á‡≤ü‡≤ø‡≤ó‡≤≥‡≥Å: " + visitCount;
    } else {
        document.getElementById("title").innerText = "Visitor Intelligence Report";
        document.getElementById("mapTitle").innerText = "üó∫ Visitor Map";
        document.getElementById("visits").innerText = "Total Visits: " + visitCount;
    }
}

let visitCount = localStorage.getItem("visits") || 0;
visitCount++;
localStorage.setItem("visits", visitCount);

document.getElementById("visits").innerText = 
    (lang === "kn") ? "‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤≠‡≥á‡≤ü‡≤ø‡≤ó‡≤≥‡≥Å: " + visitCount : "Total Visits: " + visitCount;

// Show Data Function
function showBox(){
    document.querySelector(".loader").style.display="none";
    document.querySelector(".box").style.display="block";
}

// Detect Device Type
function detectDevice(){
    let ua = navigator.userAgent;
    if(ua.includes("Android")) return "Android Device";
    if(ua.includes("iPhone")) return "iPhone";
    if(ua.includes("iPad")) return "iPad";
    if(ua.includes("Windows")) return "Windows PC";
    if(ua.includes("Mac")) return "MacBook / iMac";
    return "Unknown Device";
}

// Browser Info
document.getElementById("browser").innerText = 
    "Browser: " + navigator.userAgent;

document.getElementById("device").innerText = 
    "Device: " + detectDevice();

// Fetch IP
let ipData, loc;

fetch("https://api.ipify.org?format=json")
.then(res => res.json())
.then(data => {
    ipData = data;
    document.getElementById("ip").innerText = 
        "IP Address: " + data.ip;

    // Fetch Location
    return fetch("https://ipapi.co/json/");
})
.then(res => res.json())
.then(data => {
    loc = data;

    document.getElementById("location").innerText =
        "Location: " + data.city + ", " + data.region + ", " + data.country_name;

    document.getElementById("map").src =
        `https://maps.google.com/maps?q=${data.latitude},${data.longitude}&z=12&output=embed`;

    showBox();
});
</script>

</body>
</html>
